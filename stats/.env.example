# =============================================================================
# GEMMA AI SERVER - SECURITY CONFIGURATION
# =============================================================================
# Copy this file to .env and configure with your actual values
# NEVER commit the actual .env file to version control

# -----------------------------------------------------------------------------
# JWT AUTHENTICATION
# -----------------------------------------------------------------------------
# REQUIRED in production - Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
# Minimum 32 characters, recommended 64+ characters
GEMMA_JWT_SECRET=your-secret-jwt-key-here-minimum-32-chars

# JWT token expiry in hours (default: 24)
GEMMA_JWT_EXPIRY_HOURS=24

# JWT algorithm (default: HS256, options: HS256, HS384, HS512, RS256, RS384, RS512)
GEMMA_JWT_ALGORITHM=HS256

# -----------------------------------------------------------------------------
# API KEY AUTHENTICATION
# -----------------------------------------------------------------------------
# Comma-separated list of valid API keys
# Generate with: python -c "import secrets; print(f'sk-{secrets.token_urlsafe(48)}')"
GEMMA_API_KEYS=sk-your-api-key-1,sk-your-api-key-2

# Require API key authentication (default: true in production)
GEMMA_API_KEY_REQUIRED=true

# -----------------------------------------------------------------------------
# CORS CONFIGURATION
# -----------------------------------------------------------------------------
# Allowed origins for CORS (comma-separated)
# In production, use specific domains instead of "*"
# Examples: https://app.example.com,https://admin.example.com
GEMMA_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
# Maximum requests per minute per client
GEMMA_RATE_LIMIT_PER_MINUTE=60

# Rate limit window in seconds
GEMMA_RATE_LIMIT_WINDOW=60

# Burst size for token bucket algorithm
GEMMA_RATE_LIMIT_BURST_SIZE=10

# -----------------------------------------------------------------------------
# SECURITY HEADERS
# -----------------------------------------------------------------------------
# Content Security Policy
GEMMA_CSP_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';"

# Strict Transport Security max age (seconds)
GEMMA_HSTS_MAX_AGE=31536000

# -----------------------------------------------------------------------------
# REQUEST VALIDATION
# -----------------------------------------------------------------------------
# Enable request validation middleware
GEMMA_ENABLE_REQUEST_VALIDATION=true

# Maximum request size in MB
GEMMA_MAX_REQUEST_SIZE_MB=10

# Maximum prompt length in characters
GEMMA_MAX_PROMPT_LENGTH=4000

# Block sensitive patterns in prompts
GEMMA_BLOCK_SENSITIVE_PATTERNS=true

# -----------------------------------------------------------------------------
# SSL/TLS CONFIGURATION
# -----------------------------------------------------------------------------
# Path to SSL certificate file (for HTTPS)
# GEMMA_SSL_CERT=/path/to/cert.pem

# Path to SSL key file (for HTTPS)
# GEMMA_SSL_KEY=/path/to/key.pem

# -----------------------------------------------------------------------------
# DATABASE / REDIS (if using distributed rate limiting)
# -----------------------------------------------------------------------------
# Redis connection URL for distributed rate limiting
# REDIS_URL=redis://localhost:6379/0

# Redis password (if required)
# REDIS_PASSWORD=your-redis-password

# -----------------------------------------------------------------------------
# LOGGING & MONITORING
# -----------------------------------------------------------------------------
# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
GEMMA_LOG_LEVEL=INFO

# Enable structured logging (JSON format)
GEMMA_STRUCTURED_LOGGING=true

# Sentry DSN for error tracking (optional)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
# Server host (use 127.0.0.1 in production, not 0.0.0.0)
GEMMA_HOST=127.0.0.1

# Server port
GEMMA_PORT=8000

# Number of worker processes (0 = auto-detect CPUs)
GEMMA_WORKERS=0

# Environment (development, staging, production)
GEMMA_ENVIRONMENT=development

# -----------------------------------------------------------------------------
# MODEL CONFIGURATION
# -----------------------------------------------------------------------------
# Model name or path
GEMMA_MODEL_NAME=google/gemma-2b-it

# Model cache directory
GEMMA_MODEL_CACHE_DIR=./models_cache

# Enable 8-bit quantization (reduces memory usage)
GEMMA_QUANTIZE_8BIT=false

# -----------------------------------------------------------------------------
# SECURITY CHECKLIST
# -----------------------------------------------------------------------------
# Before deploying to production, ensure:
# [ ] JWT_SECRET is set to a strong, unique value
# [ ] API_KEYS are configured and secure
# [ ] ALLOWED_ORIGINS does not contain "*"
# [ ] ENVIRONMENT is set to "production"
# [ ] SSL certificates are configured (for HTTPS)
# [ ] Rate limiting is properly configured
# [ ] Request validation is enabled
# [ ] Sensitive patterns blocking is enabled
# [ ] Redis is configured for distributed deployments
# [ ] Logging is properly configured
# [ ] All default passwords are changed
# [ ] File permissions are restricted (especially for .env and jwt_secret.key)
# [ ] Regular security updates are scheduled
# [ ] Backup and recovery procedures are in place
# [ ] Security headers are properly configured
# [ ] Input validation is comprehensive
# [ ] Error messages don't leak sensitive information
# [ ] Dependencies are up-to-date and vulnerability-free